# react哲学

## 1. 划分组件层级

- 单一功能原则：一个组件原则上只能负责一个功能。如果它需要负责更多的功能，这时候就应该考虑将它拆分成更小的组件。

## 2. 创建一个静态UI

创建组件，通过 props 从父组件向子组件传递数据。构建静态版本时不要使用 state 。

## 3. 确定 UI state 的最小（且完整）表示

关键是遵循 DRY: Don’t Repeat Yourself 原则。只保留应用所需的可变 state 的最小集合，其他数据均由它们计算产生。

通以下三个问题，逐个检查相应数据是否属于 state：

1. 该数据是否是由父组件通过 props 传递而来的？如果是，那它应该不是 state。
1. 该数据是否随时间的推移而保持不变？如果是，那它应该也不是 state。
1. 你能否根据其他 state 或 props 计算出该数据的值？如果是，那它也不是 state。

## 4. 确定 state 放置的位置

通过以下步骤来判断：

1. 找到使用这个 state 的所有组件。
1. 找到这些组件的共同所有者组件（在组件层级上高于所有需要该 state 的组件）。
1. 该共同所有者组件或者比它层级更高的组件应该拥有该 state。
1. 如果你找不到一个合适的位置来存放该 state，可以直接创建一个新的组件来存放该 state，并将这一新组件置于高于共同所有者组件层级的位置。

## 5. 添加反向数据流

处于较低层级的组件通过调用较高层级的传递进来的回调函数（通过props传递）更新较高层级的组件中的 state。